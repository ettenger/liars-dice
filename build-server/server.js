"use strict";var _express=_interopRequireDefault(require("express")),_ws=require("ws"),_path=require("path"),_http=require("http"),_game=require("./models/game"),_player=require("./models/player");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var PORT=process.env.PORT||8080,app=(0,_express.default)(),server=(0,_http.createServer)(app);server.listen(PORT,function(){return console.log("Listening on ".concat(PORT))}),app.use(_express.default.static((0,_path.resolve)("..","build"))),app.get("*",function(a,b){b.sendFile((0,_path.resolve)("..","build","index.html"))});var wss=new _ws.Server({server:server}),game=new _game.Game;// TODO: reconnection logic ala https://github.com/websockets/ws/wiki/Websocket-client-implementation-for-auto-reconnect
// TODO: sticky session after client refresh. save uuid and name?
wss.on("connection",function(a){var b=new _player.Player(a);game.addPlayer(b),console.log("Client connected"),a.on("close",function(){return console.log("Client disconnected")})});